<html>
 	<head>
 	<meta charset="UTF-8">
 	 
 	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1,user-scalable=no">
 	<meta name="apple-mobile-web-app-capable" content="yes">
 	<meta name="apple-mobile-web-app-status-bar-style" >
 	 
 	<title>PageSlider Demo</title>
 	<style>
 	
 	 
 	.pages{
 	width: 100%;
 	height: 100%;
 	position: relative;
 	 
 	}
 	.page {
 	font-size:18px;
 	position: absolute;
 	top: 0;
 	left: 0;
 	width: 100%;
 	height: 100%;
 	overflow: hidden;
 	transform: translate3d(0px, 100%, 0px);
 	-webkit-transform: translate3d(0px, 100%, 0px);
 	-moz-transform: translate3d(0px, 100%, 0px);
 	transition: transform .5s ease-out;
 	-webkit-transition: -webkit-transform .5s ease-out;
 	-moz-transition: -moz-transform .5s ease-out;
 	}
 	.page1{background: deeppink;}
 	.page2{background: deepskyblue;}
 	.page3{background: orangered;}
 	 
 	/* the box animation */
 	.box{
 	width:100px ;
 	height:100px;
 	background:black ;
 	}
 	.play .myAnimation{
 	animation:move 1s ease 1 both ;
 	-webkit-animation: move 1s ease 1 both ;
 	}
 	@-webkit-keyframes move{
 	100%{
 	-webkit-transform:translate3d(150px,0,0);
 	transform:translate3d(150px,0,0);
 	-ms-transform: translate3d(150px,0,0);
 	}
 	}
 	</style>
 	</head>
 	 
 	<body ondragstart="window.event.returnValue=false" oncontextmenu="window.event.returnValue=false" onselectstart="event.returnValue=false">

 	 
 	<div class="pages">
 	<div class = "page page1">ε(*´･ω･)з小卓子，生日快乐鸭</div>
 	<div class = "page page2">这一年，故事简单<br />
							遇见的你，刚好喜欢<br />
							知道吗？<br />
							这世上美好的东西太多了<br />
							音乐美酒美食占一半<br />
							剩下的一半<br />
							我希望是你<br />
							<div class="box myAnimation"></div></div>
 	<div class = "page page3">其实，一直以来～<br />
我一个人很好，但你来了,我觉得更好。<br />既独立又亲密，彼此了解、彼此尊重，<br />相处不累，舒心自在 (*˘︶˘*)<br /><br /><br />
 	最后，想告诉你的是:<br /><br />
我要两颗西柚！！！<br />
 	</div>

 	</div>
 	
 	 
 	</body>
 	<script>
 	// PageSlide接收三个参数:页面元素,要设定的滑动方向,可选的扩展函数
 	var PageSlide = function(el, swipe, options) {
 	this.options = options || {} //可选函数
 	this.current = 0 //当前页面索引
 	this.pageX //横向的手指落点
 	this.pageY //纵向的手指落点
 	this.height //设备高度
 	this.width //设备宽度
 	this.flag //判断滑动方向的变量
 	this.move //滑动的距离
 	 
 	this.$el = el //当前页面的对象
 	this.swipe = swipe || 'X' //滑动方向参数
 	this.resize().init().bindEvents() //初始化
 	}
 	 
 	 
 	PageSlide.prototype.init = function(i) {
 	var current = i ? this.$el.children[i] : this.$el.firstElementChild
 	if (!current) throw 'ERROR';
 	//moving类名作为当前滑动页面的标记,也在样式中作滑动的扩展效果
 	current.classList.add('moving')
 	current.style.webkitTransform = 'translate3d(0,0,0)'
 	//以swipe的值预设置其他页面的宽高，获得流畅的交互效果
 	for(var i = 1; i <this.$el.children.length ; i++){
 	this['set' + this.swipe](this.$el.children[i], (this.swipe === 'X' ? this.width : this.height))
 	}
 	setTimeout(function() {
 	current.classList.remove('moving')
 	current.classList.add('play')
 	}, 3e2)
 	return this
 	}
 	 
 	//为页面绑定各种事件的绑定函数
 	PageSlide.prototype.bindEvents = function() {
 	var self = this
 	 
 	window.addEventListener('resize orientationchange', this.resize.bind(this), false)
 	 
 	'touchstart touchmove touchend touchcancel'.split(' ').forEach(function(evn) {
 	//将四个触控函数（申明在后面）绑定到每个页面
 	self.$el.addEventListener(evn, self[evn].bind(self), false)
 	})
 	}
 	//获得当前触控的页面对象
 	PageSlide.prototype.getCurrent = function() {
 	return this.$el.children[this.current]
 	}
 	//初始化时获得设备的宽高
 	PageSlide.prototype.resize = function() {
 	this.width = this.$el.parentNode.clientWidth
 	this.height = this.$el.parentNode.clientHeight
 	return this
 	}
 	//到达任意页面的random()方法
 	PageSlide.prototype.random = function() {
 	var count = this.$el.children.length
 	var current = this.current
 	var arr = []
 	var num
 	 
 	for (var i = 0; i < count; i++) {
 	if (i !== current) arr.push(i.toString())
 	}
 	 
 	num = Math.floor(Math.random() * arr.length)
 	this.direct(+arr[num])
 	}
 	// 四个内建的滑动事件函数,与前面绑定函数相呼应
 	PageSlide.prototype.touchstart = function(e) {
 	var touches = e.touches[0]
 	 
 	//触控开始
 	this.flag = null
 	this.move = 0
 	 
 	//记录落点
 	this.pageX = touches.pageX
 	this.pageY = touches.pageY
 	}
 	 
 	PageSlide.prototype.touchmove = function(e) {
 	var touches = e.touches[0]
 	var X = touches.pageX - this.pageX
 	var Y = touches.pageY - this.pageY
 	var current = this.getCurrent()
 	var next = current.nextElementSibling
 	var prev = current.previousElementSibling
 	 
 	//添加移动样式
 	if (!this.flag) {
 	this.flag = Math.abs(X) > Math.abs(Y) ? 'X' : 'Y'
 	 
 	if (this.flag === this.swipe) {
 	current.classList.add('moving')
 	next && next.classList.add('moving')
 	prev && prev.classList.add('moving')
 	}
 	}
 	 
 	if (this.flag === this.swipe) {
 	e.preventDefault()
 	e.stopPropagation()
 	 
 	switch (this.swipe) {
 	case 'X':
 	//swipe horizontal
 	this.move = X
 	 
 	this.setX(current, X)
 	next && (this.setX(next, X + this.width))
 	prev && (this.setX(prev, X - this.width))
 	break;
 	case 'Y':
 	//swipe vertical
 	this.move = Y
 	 
 	this.setY(current, Y)
 	next && (this.setY(next, Y + this.height))
 	prev && (this.setY(prev, Y - this.height))
 	break;
 	}
 	}
 	}
 	 
 	PageSlide.prototype.touchend = function(e) {
 	var minRange = 50
 	var move = this.move
 	var current = this.getCurrent()
 	var next = current.nextElementSibling
 	var prev = current.previousElementSibling
 	 
 	current.classList.remove('moving')
 	next && next.classList.remove('moving')
 	prev && prev.classList.remove('moving')
 	if (!this.flag) return
 	 
 	e.preventDefault()
 	//滑动结束前往下一页面,next()方法调用了go()方法
 	if (move < -minRange && next) return this.next()
 	if (move > minRange && prev) return this.prev()
 	this.reset()
 	}
 	 
 	PageSlide.prototype.touchcancel = function(e) {
 	var current = this.getCurrent()
 	var next = current.nextElementSibling
 	var prev = current.previousElementSibling
 	 
 	current.classList.remove('moving')
 	next && next.classList.remove('moving')
 	prev && prev.classList.remove('moving')
 	this.reset()
 	}
 	 
 	//动态设定translate3d参数方法
 	PageSlide.prototype.setX = function(el, x, unit) {
 	el && (el.style.webkitTransform = 'translate3d(' + x + (unit || 'px') + ',0,0)')
 	}
 	 
 	PageSlide.prototype.setY = function(el, y, unit) {
 	el && (el.style.webkitTransform = 'translate3d(0,' + y + (unit || 'px') + ',0)')
 	}
 	//设置当前触控页面translate3d参数为0的方法
 	PageSlide.prototype.setCurrent = function(el, i) {
 	el && (el.style.webkitTransform = 'translate3d(0,0,0)')
 	 
 	if (i) {
 	this.current = i
 	this.$current = this.$el.children[i]
 	}
 	 
 	}
 	//调用go()方法前往下一或上一页面
 	PageSlide.prototype.next = function() {
 	this.go(this.current + 1)
 	}
 	 
 	PageSlide.prototype.prev = function() {
 	this.go(this.current - 1)
 	}
 	//重置方法,用于初始化以及当前页面的重置
 	PageSlide.prototype.reset = function() {
 	var width = this.width
 	var height = this.height
 	var swipe = this.swipe
 	var current = this.getCurrent()
 	var prev = current.previousElementSibling
 	var next = current.nextElementSibling
 	 
 	this.setCurrent(current)
 	prev && (this['set' + swipe](prev, -(swipe === 'X' ? width : height)))
 	next && (this['set' + swipe](next, swipe === 'X' ? width : height))
 	}
 	//去往下一或上一页面的go方法
 	PageSlide.prototype.go = function(i) {
 	var onFinish = this.options.onFinish
 	var current = this.getCurrent()
 	var total = this.$el.childElementCount
 	var target = this.$el.children[i]
 	var d = i < this.current ? -1 : 1
 	 
 	 
 	if (i === this.current || i < 0 || i >= total) return
 	if (onFinish && (typeof onFinish === 'function')) onFinish.call(this, i)
 	// 滑动完成调用方法
 	typeof this.options.tranSetionEnd ==='function' && this.options.tranSetionEnd.call(this)
 	this.current = i
 	 
 	this['set' + this.swipe](current, -d * (this.swipe === 'X' ? this.width : this.height))
 	this.setCurrent(target, i)
 	this.finish(current, target)
 	}
 	//滑动完成后删除当前页面.play标记以及为下一页面添加.play标记
 	PageSlide.prototype.finish = function(curr, target) {
 	this.flag = null
 	setTimeout(function() {
 	curr && curr.classList.remove('play')
 	target && target.classList.add('play')
 	}, 3e2)
 	}
 	 
 	//直达任意页面的方法
 	//直达某一页面的方法, 因为有个项目的需要
 	//写了这个方法,要从任意页面开始滑动依然能保持正常的滑动体验
 	//就需要将直达页面的前面所有页面的translate3d参数都设置为(0,-height,0)
 	PageSlide.prototype.direct = function(i){
 	if(i&&typeof(i)==='number')
 	{
 	this.go(i)
 	for(var j = 0; j< i ;j++) {
 	this['set' + this.swipe](this.$el.children[j], -1 * (this.swipe === 'X' ? this.width : this.height))
 	}
 	}
 	else return
 	 
 	 
 	}
 	// 传参
 	document.addEventListener('touchmove', function(e) {
 	e.preventDefault()
 	
})

//控制是上下翻页还是左右翻页:Y,X

 	var pages = new PageSlide(document.querySelector('.pages'), 'Y', {
 	tranSetionEnd: function() {
 	console.log(this.current);
 	}
 	})
 	</script>
<style>

* {
		margin: 0; 
		padding: 0;
		-webkit-box-sizing: border-box;
		-moz-box-sizing: border-box;
		-ms-box-sizing: border-box;
		-o-box-sizing: border-box;
		box-sizing: border-box;
	}
	html, body {
		margin: 0;
		padding: 0;
		font: 16px/1.4 'Lato', sans-serif;
		color: #fefeff;
		-webkit-font-smoothing: antialiased;
		font-smoothing: antialiased;
	}
	body {
		background: rgb(8,5,16);
		-webkit-touch-callout: none;
		-webkit-user-select: none;
		-khtml-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
	}
	
	h1 {
		font: 3em 'Cinzel', serif;
		font-weight: 400;
		letter-spacing: 0.35em;
		text-shadow: 0 0 25px rgba(254,254,255,0.85);
	}
	h2 {
		font: 2em 'Cinzel', serif;
		font-weight: 400;
		letter-spacing: 0.5em;
		text-shadow: 0 0 25px rgba(254,254,255,0.85);
		text-transform: lowercase;
	}
	
	[class^="letter"] {
		-webkit-transition: opacity 3s ease;
		-moz-transition: opacity 3s ease;
		transition: opacity 3s ease;
	}
	.letter-0  { transition-delay: 0.2s; }
	.letter-1  { transition-delay: 0.4s; }
	.letter-2  { transition-delay: 0.6s; }
	.letter-3  { transition-delay: 0.8s; }
	.letter-4  { transition-delay: 1.0s; }
	.letter-5  { transition-delay: 1.2s; }
	.letter-6  { transition-delay: 1.4s; }
	.letter-7  { transition-delay: 1.6s; }
	.letter-8  { transition-delay: 1.8s; }
	.letter-9  { transition-delay: 2.0s; }
	.letter-10 { transition-delay: 2.2s; }
	.letter-11 { transition-delay: 2.4s; }
	.letter-12 { transition-delay: 2.6s; }
	.letter-13 { transition-delay: 2.8s; }
	.letter-14 { transition-delay: 3.0s; }
	
	h1, h2 {
		visibility: hidden;
		-webkit-transform: translate3d(0, 0, 0);
		-moz-transform: translate3d(0, 0, 0);
		transform: translate3d(0, 0, 0);
	}	
	h1.transition-in,
	h2.transition-in {
		visibility: visible;
	}
	h1 [class^="letter"], 
	h2 [class^="letter"] {
		opacity: 0;
	}
	h1.transition-in [class^="letter"],
	h2.transition-in [class^="letter"] {
		opacity: 1;
	}
	
	#container {
		display: table;
		position: absolute;
		z-index: 20;
		width: 100%;
		height: 100%;
		text-align: center;
		cursor: none;
	}
	#container > div {
		display: table-cell;
		vertical-align: middle;
	}
	#container p {
		position: absolute;
		width: 100%;
		left: 0;
		bottom: 25px;
		font-size: 0.8em;
		letter-spacing: 0.1em;
		font-weight: 300;
		color: #76747a;
		-webkit-font-smoothing: subpixel-antialiased;
		font-smoothing: subpixel-antialiased; 
	}
	#container p strong {
		color: #b3abc5;
	}
	#container p span {
		font-size: 0.75em;
		padding: 0 2px;
	}
	
	#canvas {
		position: absolute;
		z-index: 10;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		cursor: none;
	}
	
	#stats { 
		position: absolute; 
		z-index: 10; 
		left: 10px; 
		top: 10px; 
	}
	
	.dg.ac {
		z-index: 100 !important;
	}
	
 
	.STYLE1 {
	color: #00FFFF;
	font-weight: bold;
}
    </style>
	<style type="text/css">

 
<canvas id="canvas"></canvas>
 
<audio autoplay="autoplay">
	<source src="http://labs.nikrowell.com/lightsandmotion/ultraviolet/udio/Ultraviolet.ogg" type="audio/ogg">
	
</audio>
<embed src="images/yhldca.mp3" width=0 height=0 loop=“true” />
<script> 
 
var Stats=function(){var e=Date.now(),t=e,i=0,n=1/0,r=0,s=0,o=1/0,a=0,l=0,h=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(e){e.preventDefault(),v(++h%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var u=document.createElement("div");u.id="fps",u.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(u);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",u.appendChild(d);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",u.appendChild(p);74>p.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",m.appendChild(g);var y=document.createElement("div");for(y.id="msGraph",y.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(y);74>y.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#131",y.appendChild(f)}var v=function(e){switch(h=e){case 0:u.style.display="block",m.style.display="none";break;case 1:u.style.display="none",m.style.display="block"}},b=function(e,t){var i=e.appendChild(e.firstChild);i.style.height=t+"px"};return{REVISION:11,domElement:c,setMode:v,begin:function(){e=Date.now()},end:function(){var h=Date.now();return i=h-e,n=Math.min(n,i),r=Math.max(r,i),g.textContent=i+" MS ("+n+"-"+r+")",b(y,Math.min(30,30-30*(i/200))),l++,h>t+1e3&&(s=Math.round(1e3*l/(h-t)),o=Math.min(o,s),a=Math.max(a,s),d.textContent=s+" FPS ("+o+"-"+a+")",b(p,Math.min(30,30-30*(s/100))),t=h,l=0),h},update:function(){e=this.end()}}};
</script>
<script> 
 
;(function(window) {
 
	var ctx,
		hue,
		logo,
		form,
		buffer,
		target = {},
		tendrils = [],
		settings = {};
	
	settings.debug = true;
	settings.friction = 0.5;
	settings.trails = 20;
	settings.size = 50;
	settings.dampening = 0.25;
	settings.tension = 0.98;
	
	Math.TWO_PI = Math.PI * 2;
	
	// ========================================================================================
	// Oscillator
	// ----------------------------------------------------------------------------------------
	
	function Oscillator(options) {
		this.init(options || {});
	}
	
	Oscillator.prototype = (function() {
		
		var value = 0;
		
		return {
			
			init: function(options) {
				this.phase = options.phase || 0;
				this.offset = options.offset || 0;
				this.frequency = options.frequency || 0.001;
				this.amplitude = options.amplitude || 1;
			},
			
			update: function() {
				this.phase += this.frequency;
				value = this.offset + Math.sin(this.phase) * this.amplitude;
				return value;
			},
			
			value: function() {
				return value;
			}
		};
			
	})();
	
	// ========================================================================================
	// Tendril
	// ----------------------------------------------------------------------------------------
	
	function Tendril(options) {
		this.init(options || {});
	}
	
	Tendril.prototype = (function() {
		
		function Node() {
			this.x = 0;
			this.y = 0;
			this.vy = 0;
			this.vx = 0;
		}
		
		return {
		
			init: function(options) {
				
				this.spring = options.spring + (Math.random() * 0.1) - 0.05; 
				this.friction = settings.friction + (Math.random() * 0.01) - 0.005;
				this.nodes = [];
				
				for(var i = 0, node; i < settings.size; i++) {
			
					node = new Node();
					node.x = target.x;
					node.y = target.y;
			
					this.nodes.push(node);
				}	
			},
			
			update: function() {
				
				var spring = this.spring,
					node = this.nodes[0];
				
				node.vx += (target.x - node.x) * spring;
				node.vy += (target.y - node.y) * spring;
				
				for(var prev, i = 0, n = this.nodes.length; i < n; i++) {
	
					node = this.nodes[i];
					
					if(i > 0) {
						
						prev = this.nodes[i - 1];
						
						node.vx += (prev.x - node.x) * spring;
						node.vy += (prev.y - node.y) * spring;
						node.vx += prev.vx * settings.dampening;
						node.vy += prev.vy * settings.dampening;
					}
					
					node.vx *= this.friction;
					node.vy *= this.friction;
					node.x += node.vx;
					node.y += node.vy;
					
					spring *= settings.tension;
				}
			},
	
			draw: function() {
			
				var x = this.nodes[0].x, 
					y = this.nodes[0].y,
					a, b;
				
				ctx.beginPath();
				ctx.moveTo(x, y);
				
				for(var i = 1, n = this.nodes.length - 2; i < n; i++) {
					
					a = this.nodes[i];
					b = this.nodes[i + 1];
					x = (a.x + b.x) * 0.5;
					y = (a.y + b.y) * 0.5;
					
					ctx.quadraticCurveTo(a.x, a.y, x, y);
				}
				
				a = this.nodes[i];
				b = this.nodes[i + 1];
				
				ctx.quadraticCurveTo(a.x, a.y, b.x, b.y);
				ctx.stroke();
				ctx.closePath();
			}
		};
	
	})();
	
	// ----------------------------------------------------------------------------------------
	
	function init(event) {
	
		document.removeEventListener('mousemove', init);
		document.removeEventListener('touchstart', init);
		
		document.addEventListener('mousemove', mousemove);
		document.addEventListener('touchmove', mousemove);
		document.addEventListener('touchstart', touchstart);
		
		mousemove(event);
		reset();
		loop();
	}
	
	function reset() {
		
		tendrils = [];
 
		for(var i = 0; i < settings.trails; i++) {
			
			tendrils.push(new Tendril({
				spring: 0.45 + 0.025 * (i / settings.trails)
			}));
		}
	}
	
	function loop() {
		
		if(!ctx.running) return;
	
		ctx.globalCompositeOperation = 'source-over';
		ctx.fillStyle = 'rgba(8,5,16,0.4)';
		ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
		ctx.globalCompositeOperation = 'lighter';
		ctx.strokeStyle = 'hsla(' + Math.round(hue.update()) + ',90%,50%,0.25)';
		ctx.lineWidth = 1;
		
		if(ctx.frame % 60 == 0) {
			console.log(hue.update(), Math.round(hue.update()), hue.phase, hue.offset, hue.frequency, hue.amplitude);
		}
		
		for(var i = 0, tendril; i < settings.trails; i++) {
			tendril = tendrils[i];
			tendril.update();
			tendril.draw();
		}
		
		ctx.frame++;
		ctx.stats.update();
		requestAnimFrame(loop);
	}
	
	function resize() {
		ctx.canvas.width = window.innerWidth;
		ctx.canvas.height = window.innerHeight;
	}
	
	function start() {
		if(!ctx.running) {
			ctx.running = true;
			loop();
		}
	}
	
	function stop() {
		ctx.running = false;
	}
	
	function mousemove(event) {
		if(event.touches) {
			target.x = event.touches[0].pageX;
			target.y = event.touches[0].pageY;
		} else {
			target.x = event.clientX
			target.y = event.clientY;
		}
		event.preventDefault();
	}
	
	function touchstart(event) {
		if(event.touches.length == 1) {
			target.x = event.touches[0].pageX;
			target.y = event.touches[0].pageY;
		}
	}
	
	function keyup(event) {
		
		switch(event.keyCode) {
			case 32:
				save();
				break;
			default: 
				// console.log(event.keyCode);
		}
	}
	
	function letters(id) {
	
		var el = document.getElementById(id),
			letters = el.innerHTML.replace('&amp;', '&').split(''),
			heading = '';
		
		for(var i = 0, n = letters.length, letter; i < n; i++) {
			letter = letters[i].replace('&', '&amp');
			heading += letter.trim() ? '<span class="letter-' + i + '">' + letter + '</span>' : '&nbsp;';
		}
		
		el.innerHTML = heading;
		setTimeout(function() { 
			el.className = 'transition-in';	
		}, (Math.random() * 500) + 500);
	}
	
	function save() {
	
		if(!buffer) {
			
			buffer = document.createElement('canvas');
			buffer.width = screen.availWidth;
			buffer.height = screen.availHeight;
			buffer.ctx = buffer.getContext('2d');
			
			form = document.createElement('form');
			form.method = 'post';
			form.input = document.createElement('input');
			form.input.type = 'hidden';
			form.input.name = 'data';
			form.appendChild(form.input);
			
			document.body.appendChild(form);
		}
	
		buffer.ctx.fillStyle = 'rgba(8,5,16)';
		buffer.ctx.fillRect(0, 0, buffer.width, buffer.height);
		
		buffer.ctx.drawImage(canvas,
			Math.round(buffer.width / 2 - canvas.width / 2), 
			Math.round(buffer.height / 2 - canvas.height / 2)
		);
		
		buffer.ctx.drawImage(logo,
			Math.round(buffer.width / 2 - logo.width / 4), 
			Math.round(buffer.height / 2 - logo.height / 4),
			logo.width / 2,
			logo.height / 2
		);
		
		window.open(buffer.toDataURL(), 'wallpaper', 'top=0,left=0,width=' + buffer.width + ',height=' + buffer.height);
		
		// form.input.value = buffer.toDataURL().substr(22);
		// form.submit();
	}
	
	window.requestAnimFrame = (function() {
		return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(fn) { window.setTimeout(fn, 1000 / 60) };
	})();
	
	window.onload = function() {
		
		ctx = document.getElementById('canvas').getContext('2d');
		ctx.stats = new Stats();
		ctx.running = true;
		ctx.frame = 1;
		
		logo = new Image();
		logo.src = 'http://labs.nikrowell.com/lightsandmotion/ultraviolet/images/logo.png';
		
		hue = new Oscillator({
			phase: Math.random() * Math.TWO_PI,
			amplitude: 85,
			frequency: 0.0015,
			offset: 285
		});
		
		letters('h1');
		letters('h2');
		
		document.addEventListener('mousemove', init);
		document.addEventListener('touchstart', init);
		document.body.addEventListener('orientationchange', resize);
		window.addEventListener('resize', resize);
		window.addEventListener('keyup', keyup);
		window.addEventListener('focus', start);
		window.addEventListener('blur', stop);
		
		resize();
		
		if(window.DEBUG) {
			
			var gui = new dat.GUI();
			
			// gui.add(settings, 'debug');
			settings.gui.add(settings, 'trails', 1, 30).onChange(reset);
			settings.gui.add(settings, 'size', 25, 75).onFinishChange(reset);
			settings.gui.add(settings, 'friction', 0.45, 0.55).onFinishChange(reset);
			settings.gui.add(settings, 'dampening', 0.01, 0.4).onFinishChange(reset);
			settings.gui.add(settings, 'tension', 0.95, 0.999).onFinishChange(reset);	
			
			document.body.appendChild(ctx.stats.domElement);
		}
	};
 
})(window);
 
</script>
 
</body>
</html>
